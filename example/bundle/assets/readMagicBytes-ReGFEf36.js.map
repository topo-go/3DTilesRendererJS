{"version":3,"file":"readMagicBytes-ReGFEf36.js","sources":["../../../src/core/renderer/loaders/LoaderBase.js","../../../src/core/renderer/utilities/arrayToString.js","../../../src/core/renderer/utilities/FeatureTable.js","../../../src/core/renderer/utilities/BatchTableHierarchyExtension.js","../../../src/core/renderer/utilities/BatchTable.js","../../../src/core/renderer/utilities/readMagicBytes.js"],"sourcesContent":["export class LoaderBase {\n\n\tconstructor() {\n\n\t\tthis.fetchOptions = {};\n\t\tthis.workingPath = '';\n\n\t}\n\n\tload( ...args ) {\n\n\t\tconsole.warn( 'Loader: \"load\" function has been deprecated in favor of \"loadAsync\".' );\n\t\treturn this.loadAsync( ...args );\n\n\t}\n\n\tloadAsync( url ) {\n\n\t\treturn fetch( url, this.fetchOptions )\n\t\t\t.then( res => {\n\n\t\t\t\tif ( ! res.ok ) {\n\n\t\t\t\t\tthrow new Error( `Failed to load file \"${ url }\" with status ${ res.status } : ${ res.statusText }` );\n\n\t\t\t\t}\n\t\t\t\treturn res.arrayBuffer();\n\n\t\t\t} )\n\t\t\t.then( buffer => {\n\n\t\t\t\tif ( this.workingPath === '' ) {\n\n\t\t\t\t\tthis.workingPath = this.workingPathForURL( url );\n\n\t\t\t\t}\n\n\t\t\t\treturn this.parse( buffer );\n\n\t\t\t} );\n\n\t}\n\n\tresolveExternalURL( url ) {\n\n\t\tif ( /^[^\\\\/]/.test( url ) && ! /^http/.test( url ) ) {\n\n\t\t\treturn this.workingPath + '/' + url;\n\n\t\t} else {\n\n\t\t\treturn url;\n\n\t\t}\n\n\t}\n\n\tworkingPathForURL( url ) {\n\n\t\tconst splits = url.split( /[\\\\/]/g );\n\t\tsplits.pop();\n\t\tconst workingPath = splits.join( '/' );\n\t\treturn workingPath + '/';\n\n\t}\n\n\tparse( buffer ) {\n\n\t\tthrow new Error( 'LoaderBase: Parse not implemented.' );\n\n\t}\n\n}\n","const utf8decoder = new TextDecoder();\n\nexport function arrayToString( array ) {\n\n\treturn utf8decoder.decode( array );\n\n}\n","import { arrayToString } from './arrayToString.js';\n\nexport function parseBinArray( buffer, arrayStart, count, type, componentType, propertyName ) {\n\n\tlet stride;\n\tswitch ( type ) {\n\n\t\tcase 'SCALAR':\n\t\t\tstride = 1;\n\t\t\tbreak;\n\n\t\tcase 'VEC2':\n\t\t\tstride = 2;\n\t\t\tbreak;\n\n\t\tcase 'VEC3':\n\t\t\tstride = 3;\n\t\t\tbreak;\n\n\t\tcase 'VEC4':\n\t\t\tstride = 4;\n\t\t\tbreak;\n\n\t\tdefault:\n\t\t\tthrow new Error( `FeatureTable : Feature type not provided for \"${ propertyName }\".` );\n\n\t}\n\n\tlet data;\n\tconst arrayLength = count * stride;\n\n\tswitch ( componentType ) {\n\n\t\tcase 'BYTE':\n\t\t\tdata = new Int8Array( buffer, arrayStart, arrayLength );\n\t\t\tbreak;\n\n\t\tcase 'UNSIGNED_BYTE':\n\t\t\tdata = new Uint8Array( buffer, arrayStart, arrayLength );\n\t\t\tbreak;\n\n\t\tcase 'SHORT':\n\t\t\tdata = new Int16Array( buffer, arrayStart, arrayLength );\n\t\t\tbreak;\n\n\t\tcase 'UNSIGNED_SHORT':\n\t\t\tdata = new Uint16Array( buffer, arrayStart, arrayLength );\n\t\t\tbreak;\n\n\t\tcase 'INT':\n\t\t\tdata = new Int32Array( buffer, arrayStart, arrayLength );\n\t\t\tbreak;\n\n\t\tcase 'UNSIGNED_INT':\n\t\t\tdata = new Uint32Array( buffer, arrayStart, arrayLength );\n\t\t\tbreak;\n\n\t\tcase 'FLOAT':\n\t\t\tdata = new Float32Array( buffer, arrayStart, arrayLength );\n\t\t\tbreak;\n\n\t\tcase 'DOUBLE':\n\t\t\tdata = new Float64Array( buffer, arrayStart, arrayLength );\n\t\t\tbreak;\n\n\t\tdefault:\n\t\t\tthrow new Error( `FeatureTable : Feature component type not provided for \"${ propertyName }\".` );\n\n\t}\n\n\treturn data;\n\n}\n\nexport class FeatureTable {\n\n\tconstructor( buffer, start, headerLength, binLength ) {\n\n\t\tthis.buffer = buffer;\n\t\tthis.binOffset = start + headerLength;\n\t\tthis.binLength = binLength;\n\n\t\tlet header = null;\n\t\tif ( headerLength !== 0 ) {\n\n\t\t\tconst headerData = new Uint8Array( buffer, start, headerLength );\n\t\t\theader = JSON.parse( arrayToString( headerData ) );\n\n\t\t} else {\n\n\t\t\theader = {};\n\n\t\t}\n\t\tthis.header = header;\n\n\t}\n\n\tgetKeys() {\n\n\t\treturn Object.keys( this.header );\n\n\t}\n\n\tgetData( key, count, defaultComponentType = null, defaultType = null ) {\n\n\t\tconst header = this.header;\n\n\t\tif ( ! ( key in header ) ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\tconst feature = header[ key ];\n\t\tif ( ! ( feature instanceof Object ) ) {\n\n\t\t\treturn feature;\n\n\t\t} else if ( Array.isArray( feature ) ) {\n\n\t\t\treturn feature;\n\n\t\t} else {\n\n\t\t\tconst { buffer, binOffset, binLength } = this;\n\t\t\tconst byteOffset = feature.byteOffset || 0;\n\t\t\tconst featureType = feature.type || defaultType;\n\t\t\tconst featureComponentType = feature.componentType || defaultComponentType;\n\n\t\t\tif ( 'type' in feature && defaultType && feature.type !== defaultType ) {\n\n\t\t\t\tthrow new Error( 'FeatureTable: Specified type does not match expected type.' );\n\n\t\t\t}\n\n\t\t\tconst arrayStart = binOffset + byteOffset;\n\t\t\tconst data = parseBinArray( buffer, arrayStart, count, featureType, featureComponentType, key );\n\n\t\t\tconst dataEnd = arrayStart + data.byteLength;\n\t\t\tif ( dataEnd > binOffset + binLength ) {\n\n\t\t\t\tthrow new Error( 'FeatureTable: Feature data read outside binary body length.' );\n\n\t\t\t}\n\n\t\t\treturn data;\n\n\t\t}\n\n\t}\n\n\tgetBuffer( byteOffset, byteLength ) {\n\n\t\tconst { buffer, binOffset } = this;\n\t\treturn buffer.slice( binOffset + byteOffset, binOffset + byteOffset + byteLength );\n\n\t}\n\n}\n","import { parseBinArray } from './FeatureTable.js';\n\nexport class BatchTableHierarchyExtension {\n\n\tconstructor( batchTable ) {\n\n\t\tthis.batchTable = batchTable;\n\n\t\tconst extensionHeader = batchTable.header.extensions[ '3DTILES_batch_table_hierarchy' ];\n\n\t\tthis.classes = extensionHeader.classes;\n\t\tfor ( const classDef of this.classes ) {\n\n\t\t\tconst instances = classDef.instances;\n\t\t\tfor ( const property in instances ) {\n\n\t\t\t\tclassDef.instances[ property ] = this._parseProperty( instances[ property ], classDef.length, property );\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.instancesLength = extensionHeader.instancesLength;\n\n\t\tthis.classIds = this._parseProperty( extensionHeader.classIds, this.instancesLength, 'classIds' );\n\n\t\tif ( extensionHeader.parentCounts ) {\n\n\t\t\tthis.parentCounts = this._parseProperty( extensionHeader.parentCounts, this.instancesLength, 'parentCounts' );\n\n\t\t} else {\n\n\t\t\tthis.parentCounts = new Array( this.instancesLength ).fill( 1 );\n\n\t\t}\n\n\t\tif ( extensionHeader.parentIds ) {\n\n\t\t\tconst parentIdsLength = this.parentCounts.reduce( ( a, b ) => a + b, 0 );\n\t\t\tthis.parentIds = this._parseProperty( extensionHeader.parentIds, parentIdsLength, 'parentIds' );\n\n\t\t} else {\n\n\t\t\tthis.parentIds = null;\n\n\t\t}\n\n\t\tthis.instancesIds = [];\n\t\tconst classCounter = {};\n\t\tfor ( const classId of this.classIds ) {\n\n\t\t\tclassCounter[ classId ] = classCounter[ classId ] ?? 0;\n\t\t\tthis.instancesIds.push( classCounter[ classId ] );\n\t\t\tclassCounter[ classId ] ++;\n\n\t\t}\n\n\t}\n\n\t_parseProperty( property, propertyLength, propertyName ) {\n\n\t\tif ( Array.isArray( property ) ) {\n\n\t\t\treturn property;\n\n\t\t} else {\n\n\t\t\tconst { buffer, binOffset } = this.batchTable;\n\n\t\t\tconst byteOffset = property.byteOffset;\n\t\t\tconst componentType = property.componentType || 'UNSIGNED_SHORT';\n\n\t\t\tconst arrayStart = binOffset + byteOffset;\n\n\t\t\treturn parseBinArray( buffer, arrayStart, propertyLength, 'SCALAR', componentType, propertyName );\n\n\t\t}\n\n\t}\n\n\tgetDataFromId( id, target = {} ) {\n\n\t\t// Get properties inherited from parents\n\n\t\tconst parentCount = this.parentCounts[ id ];\n\n\t\tif ( this.parentIds && parentCount > 0 ) {\n\n\t\t\tlet parentIdsOffset = 0;\n\t\t\tfor ( let i = 0; i < id; i ++ ) {\n\n\t\t\t\tparentIdsOffset += this.parentCounts[ i ];\n\n\t\t\t}\n\n\t\t\tfor ( let i = 0; i < parentCount; i ++ ) {\n\n\t\t\t\tconst parentId = this.parentIds[ parentIdsOffset + i ];\n\t\t\t\tif ( parentId !== id ) {\n\n\t\t\t\t\tthis.getDataFromId( parentId, target );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Get properties proper to this instance\n\n\t\tconst classId = this.classIds[ id ];\n\t\tconst instances = this.classes[ classId ].instances;\n\t\tconst className = this.classes[ classId ].name;\n\t\tconst instanceId = this.instancesIds[ id ];\n\n\t\tfor ( const key in instances ) {\n\n\t\t\ttarget[ className ] = target[ className ] || {};\n\t\t\ttarget[ className ][ key ] = instances[ key ][ instanceId ];\n\n\t\t}\n\n\t\treturn target;\n\n\t}\n\n}\n","import { BatchTableHierarchyExtension } from './BatchTableHierarchyExtension.js';\nimport { FeatureTable } from './FeatureTable.js';\n\nexport class BatchTable extends FeatureTable {\n\n\tget batchSize() {\n\n\t\tconsole.warn( 'BatchTable.batchSize has been deprecated and replaced with BatchTable.count.' );\n\t\treturn this.count;\n\n\t}\n\n\tconstructor( buffer, count, start, headerLength, binLength ) {\n\n\t\tsuper( buffer, start, headerLength, binLength );\n\t\tthis.count = count;\n\n\t\tthis.extensions = {};\n\t\tconst extensions = this.header.extensions;\n\t\tif ( extensions ) {\n\n\t\t\tif ( extensions[ '3DTILES_batch_table_hierarchy' ] ) {\n\n\t\t\t\tthis.extensions[ '3DTILES_batch_table_hierarchy' ] = new BatchTableHierarchyExtension( this );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tgetData( key, componentType = null, type = null ) {\n\n\t\tconsole.warn( 'BatchTable: BatchTable.getData is deprecated. Use BatchTable.getDataFromId to get all' +\n\t\t\t'properties for an id or BatchTable.getPropertyArray for getting an array of value for a property.' );\n\t\treturn super.getData( key, this.count, componentType, type );\n\n\t}\n\n\tgetDataFromId( id, target = {} ) {\n\n\t\tif ( id < 0 || id >= this.count ) {\n\n\t\t\tthrow new Error( `BatchTable: id value \"${ id }\" out of bounds for \"${ this.count }\" features number.` );\n\n\t\t}\n\n\t\tfor ( const key of this.getKeys() ) {\n\n\t\t\tif ( key !== 'extensions' ) {\n\n\t\t\t\ttarget[ key ] = super.getData( key, this.count )[ id ];\n\n\t\t\t}\n\n\t\t}\n\n\t\tfor ( const extensionName in this.extensions ) {\n\n\t\t\tconst extension = this.extensions[ extensionName ];\n\n\t\t\tif ( extension.getDataFromId instanceof Function ) {\n\n\t\t\t\ttarget[ extensionName ] = target[ extensionName ] || {};\n\t\t\t\textension.getDataFromId( id, target[ extensionName ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn target;\n\n\t}\n\n\tgetPropertyArray( key ) {\n\n\t\treturn super.getData( key, this.count );\n\n\t}\n\n\n}\n","export function readMagicBytes( bufferOrDataView ) {\n\n\tif ( bufferOrDataView === null || bufferOrDataView.byteLength < 4 ) {\n\n\t\treturn '';\n\n\t}\n\n\tlet view;\n\tif ( bufferOrDataView instanceof DataView ) {\n\n\t\tview = bufferOrDataView;\n\n\t} else {\n\n\t\tview = new DataView( bufferOrDataView );\n\n\t}\n\n\tif ( String.fromCharCode( view.getUint8( 0 ) ) === '{' ) {\n\n\t\treturn null;\n\n\t}\n\n\tlet magicBytes = '';\n\tfor ( let i = 0; i < 4; i ++ ) {\n\n\t\tmagicBytes += String.fromCharCode( view.getUint8( i ) );\n\n\t}\n\n\treturn magicBytes;\n\n}\n"],"names":["LoaderBase","args","url","res","buffer","splits","utf8decoder","arrayToString","array","parseBinArray","arrayStart","count","type","componentType","propertyName","stride","data","arrayLength","FeatureTable","start","headerLength","binLength","header","headerData","key","defaultComponentType","defaultType","feature","binOffset","byteOffset","featureType","featureComponentType","byteLength","BatchTableHierarchyExtension","batchTable","extensionHeader","classDef","instances","property","parentIdsLength","a","b","classCounter","classId","propertyLength","id","target","parentCount","parentIdsOffset","i","parentId","className","instanceId","BatchTable","extensions","extensionName","extension","readMagicBytes","bufferOrDataView","view","magicBytes"],"mappings":"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"}