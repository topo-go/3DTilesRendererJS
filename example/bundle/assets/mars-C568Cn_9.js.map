{"version":3,"file":"mars-C568Cn_9.js","sources":["../../mars.js"],"sourcesContent":["import { TilesRenderer, EnvironmentControls } from '3d-tiles-renderer';\nimport { DebugTilesPlugin } from '3d-tiles-renderer/plugins';\nimport {\n\tScene,\n\tDirectionalLight,\n\tAmbientLight,\n\tWebGLRenderer,\n\tPerspectiveCamera,\n\tGroup,\n\tFogExp2,\n} from 'three';\nimport { GUI } from 'three/examples/jsm/libs/lil-gui.module.min.js';\nimport { TopoLinesPlugin } from './src/plugins/topolines/TopoLinesPlugin.js';\n\nlet camera, controls, scene, renderer;\nlet groundTiles, skyTiles;\n\nconst params = {\n\n\terrorTarget: 6,\n\tdisplayBoxBounds: false,\n\tdisplayTopoLines: false,\n\tfog: false,\n\n};\n\ninit();\nrender();\n\nfunction init() {\n\n\tconst fog = new FogExp2( 0xd8cec0, .0075, 250 );\n\tscene = new Scene();\n\n\t// primary camera view\n\trenderer = new WebGLRenderer( { antialias: true } );\n\trenderer.setPixelRatio( window.devicePixelRatio );\n\trenderer.setSize( window.innerWidth, window.innerHeight );\n\trenderer.setClearColor( 0xd8cec0 );\n\n\tdocument.body.appendChild( renderer.domElement );\n\trenderer.domElement.tabIndex = 1;\n\n\tcamera = new PerspectiveCamera( 60, window.innerWidth / window.innerHeight, 1, 4000 );\n\tcamera.position.set( 20, 10, 20 );\n\tcamera.lookAt( 0, 0, 0 );\n\n\t// controls\n\tcontrols = new EnvironmentControls( scene, camera, renderer.domElement );\n\tcontrols.minZoomDistance = 2;\n\tcontrols.cameraRadius = 1;\n\tcontrols.enableDamping = true;\n\n\t// lights\n\tconst dirLight = new DirectionalLight( 0xffffff );\n\tdirLight.position.set( 1, 2, 3 );\n\tscene.add( dirLight );\n\n\tconst ambLight = new AmbientLight( 0xffffff, 0.2 );\n\tscene.add( ambLight );\n\n\tconst tilesParent = new Group();\n\ttilesParent.rotation.set( Math.PI / 2, 0, 0 );\n\tscene.add( tilesParent );\n\n\tgroundTiles = new TilesRenderer( 'https://raw.githubusercontent.com/NASA-AMMOS/3DTilesSampleData/master/msl-dingo-gap/0528_0260184_to_s64o256_colorize/0528_0260184_to_s64o256_colorize/0528_0260184_to_s64o256_colorize_tileset.json' );\n\tgroundTiles.registerPlugin( new DebugTilesPlugin() );\n\tgroundTiles.registerPlugin( new TopoLinesPlugin() );\n\tgroundTiles.fetchOptions.mode = 'cors';\n\tgroundTiles.lruCache.minSize = 900;\n\tgroundTiles.lruCache.maxSize = 1300;\n\tgroundTiles.errorTarget = 12;\n\n\tskyTiles = new TilesRenderer( 'https://raw.githubusercontent.com/NASA-AMMOS/3DTilesSampleData/master/msl-dingo-gap/0528_0260184_to_s64o256_colorize/0528_0260184_to_s64o256_sky/0528_0260184_to_s64o256_sky_tileset.json' );\n\tskyTiles.registerPlugin( new DebugTilesPlugin() );\n\tskyTiles.fetchOptions.mode = 'cors';\n\tskyTiles.lruCache = groundTiles.lruCache;\n\n\ttilesParent.add( groundTiles.group, skyTiles.group );\n\n\tonWindowResize();\n\twindow.addEventListener( 'resize', onWindowResize, false );\n\n\tconst gui = new GUI();\n\tgui.add( params, 'fog' ).onChange( v => {\n\n\t\tscene.fog = v ? fog : null;\n\n\t} );\n\n\tgui.add( params, 'displayBoxBounds' );\n\tgui.add( params, 'displayTopoLines' );\n\tgui.add( params, 'errorTarget', 0, 100 );\n\tgui.open();\n\n}\n\nfunction onWindowResize() {\n\n\tcamera.aspect = window.innerWidth / window.innerHeight;\n\tcamera.updateProjectionMatrix();\n\trenderer.setSize( window.innerWidth, window.innerHeight );\n\trenderer.setPixelRatio( window.devicePixelRatio );\n\n}\n\nfunction render() {\n\n\trequestAnimationFrame( render );\n\n\tcontrols.update();\n\tcamera.updateMatrixWorld();\n\n\tgroundTiles.errorTarget = params.errorTarget;\n\tgroundTiles.getPluginByName( 'DEBUG_TILES_PLUGIN' ).displayBoxBounds = params.displayBoxBounds;\n\tskyTiles.getPluginByName( 'DEBUG_TILES_PLUGIN' ).displayBoxBounds = params.displayBoxBounds;\n\n\tgroundTiles.getPluginByName( 'TOPO_LINES_PLUGIN' ).topoOpacity = params.displayTopoLines ? 0.5 : 0;\n\n\tgroundTiles.setCamera( camera );\n\tgroundTiles.setResolutionFromRenderer( camera, renderer );\n\tgroundTiles.update();\n\n\tskyTiles.setCamera( camera );\n\tskyTiles.setResolutionFromRenderer( camera, renderer );\n\tskyTiles.update();\n\n\trenderer.render( scene, camera );\n\n}\n"],"names":["camera","controls","scene","renderer","groundTiles","skyTiles","params","init","render","fog","FogExp2","Scene","WebGLRenderer","PerspectiveCamera","EnvironmentControls","dirLight","DirectionalLight","ambLight","AmbientLight","tilesParent","Group","TilesRenderer","DebugTilesPlugin","TopoLinesPlugin","onWindowResize","gui","GUI","v"],"mappings":"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"}